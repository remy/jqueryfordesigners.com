<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta http-equiv="Content-Language" content="en-gb" />
	<meta name="description" content="" />
	<meta name="author" content="" />
	<meta name="keywords" content="" />
	<title>  Scroll Linked Navigation | jQuery for Designers - Tutorials and screencasts</title>
	<link rel="stylesheet" type="text/css" href="wp-content/themes/j4d/static/css/all.min.css" />
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="feed/rss/index.html" />
	<link rel="alternate" type="text/xml" title="RSS .92" href="feed/rss/index.html" />
	<link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="feed/atom/index.html" />

	<link rel="pingback" href="xmlrpc.php" />
		<link rel='archives' title='June 2011' href='2011/06/index.html' />
	<link rel='archives' title='February 2011' href='2011/02/index.html' />
	<link rel='archives' title='August 2010' href='2010/08/index.html' />
	<link rel='archives' title='July 2010' href='2010/07/index.html' />
	<link rel='archives' title='April 2010' href='2010/04/index.html' />
	<link rel='archives' title='March 2010' href='2010/03/index.html' />
	<link rel='archives' title='January 2010' href='2010/01/index.html' />
	<link rel='archives' title='October 2009' href='2009/10/index.html' />
	<link rel='archives' title='September 2009' href='2009/09/index.html' />
	<link rel='archives' title='August 2009' href='2009/08/index.html' />
	<link rel='archives' title='July 2009' href='2009/07/index.html' />
	<link rel='archives' title='June 2009' href='2009/06/index.html' />
	<link rel='archives' title='April 2009' href='2009/04/index.html' />
	<link rel='archives' title='March 2009' href='2009/03/index.html' />
	<link rel='archives' title='February 2009' href='2009/02/index.html' />
	<link rel='archives' title='January 2009' href='2009/01/index.html' />
	<link rel='archives' title='December 2008' href='2008/12/index.html' />
	<link rel='archives' title='October 2008' href='2008/10/index.html' />
	<link rel='archives' title='August 2008' href='2008/08/index.html' />
	<link rel='archives' title='July 2008' href='2008/07/index.html' />
	<link rel='archives' title='June 2008' href='2008/06/index.html' />
	<link rel='archives' title='May 2008' href='2008/05/index.html' />
	<link rel='archives' title='April 2008' href='2008/04/index.html' />
	<link rel='archives' title='March 2008' href='2008/03/index.html' />
	<link rel='archives' title='February 2008' href='2008/02/index.html' />
	<link rel='archives' title='January 2008' href='2008/01/index.html' />
	<link rel='archives' title='December 2007' href='2007/12/index.html' />
<link rel="alternate" type="application/rss+xml" title="jQuery for Designers &raquo; Scroll Linked Navigation Comments Feed" href="scroll-linked-navigation/feed/index.html" />
<link rel='stylesheet' id='msw_wpfm_scan-css'  href='wp-content/plugins/wordpress-file-monitor/wordpress-file-monitor.php%3Fver=scan.html' type='text/css' media='all' />
<script type='text/javascript' src='http://jqueryfordesigners.com/wp-includes/js/jquery/jquery.js?ver=1.7.1'></script>
<script type='text/javascript' src='wp-content/plugins/wp-ajax-edit-comments/js-includes/wp-ajax-edit-comments.js.php%3Fver=1.1.html'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://jqueryfordesigners.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Debugging Tools' href='index.html%3Fp=290.html' />
<link rel='next' title='Populate Select Boxes' href='index.html%3Fp=328.html' />
<meta name="generator" content="WordPress 3.3.1" />
<link rel='canonical' href='index.html%3Fp=309.html' />
<link rel='shortlink' href='index.html%3Fp=309.html' />
<link type="text/css" rel="stylesheet" href="wp-content/plugins/wp-ajax-edit-comments/css/editComments.css" />
</head>
<body id="articlePage">


	<!-- BEGIN header -->
	<div id="topstrap">
		<ul>
      <!-- <li class="new"><strong>New!</strong> <a href="http://full-frontal.org">Full Frontal - the JavaScript conference</a></li> -->
			<li class="subscribe">Subscribe to our <a class="feed" href="feed/rss/index.html">Articles</a> <a class="podcast" href="http://phobos.apple.com/WebObjects/MZStore.woa/wa/viewPodcast?id=281057468">Podcast</a></li>
		</ul>
	</div>
	
	<div id="header" class="clearFix">
	
		<div class="minWidth">	
			<h1><a href="index.html"><span>jQuery for Designers</span></a></h1>
			
			<ul id="filter">
				<li>Filter by</li>
				<!-- <li><a href="/">All</a></li> -->
				<li><a href="tag/easy/index.html">Easy</a></li>
				<li><a href="tag/medium/index.html">Medium</a></li>
				<li><a href="tag/hard/index.html">Hard</a></li>
				<li id="searchLink"><a href="index.html%3Fp=309.html#searchForm">Search</a></li>
			</ul>
			
		</div>	
	</div>
	<!-- END header -->
	
	<!-- BEGIN titleHolder -->
	<div id="titleHolder" class="clearFix">
		<div class="titleHolderInner">
		<div id="scrollButtons">
			<div class="minWidth clearFix">
	
        <ul class="clearFix" id="articleStrip">
      <li class="selected"><a title="Scroll Linked Navigation" href="index.html%3Fp=309.html"><img alt="Scroll Linked Navigation" src="images/video/scroll-link-nav_thumb.gif" /></a><em class="selected">Selected</em></li>
<li><a title="Debugging Tools" href="index.html%3Fp=290.html"><img alt="Debugging Tools" src="images/video/debuggers_thumb.gif" /></a></li>
<li><a title="Enabling the Back Button" href="index.html%3Fp=252.html"><img alt="Enabling the Back Button" src="http://static.jqueryfordesigners.com/images/video/bbq_thumb.gif" /></a></li>
<li><a title="J4D update: My Book, Other Books, Workshops and talks" href="index.html%3Fp=247.html"><img alt="J4D update: My Book, Other Books, Workshops and talks" src="wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="Adding Keyboard Navigation" href="index.html%3Fp=231.html"><img alt="Adding Keyboard Navigation" src="http://static.jqueryfordesigners.com/images/video/keyboard-nav-thumb.jpg" /></a></li>
<li><a title="Fixed Floating Elements" href="index.html%3Fp=214.html"><img alt="Fixed Floating Elements" src="http://static.jqueryfordesigners.com/images/video/fixedfloat-thumb.gif" /></a></li>
<li><a title="Want to learn more about JavaScript? Go Full Frontal!" href="index.html%3Fp=199.html"><img alt="Want to learn more about JavaScript? Go Full Frontal!" src="wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="iPhone-like Sliding Headers" href="index.html%3Fp=190.html"><img alt="iPhone-like Sliding Headers" src="images/video/header-slide-thumb.jpg" /></a></li>
<li><a title="Automatic Infinite Carousel" href="index.html%3Fp=158.html"><img alt="Automatic Infinite Carousel" src="images/video/infinite-auto-thumb.jpg" /></a></li>
<li><a title="Play School: Broken Repeating Animations" href="index.html%3Fp=145.html"><img alt="Play School: Broken Repeating Animations" src="images/video/repeat-effect-thumb.png" /></a></li>
<li><a title="API: queue &#038; dequeue" href="index.html%3Fp=135.html"><img alt="API: queue &#038; dequeue" src="images/video/queue-thumb.gif" /></a></li>
<li><a title="jQuery Infinite Carousel" href="index.html%3Fp=128.html"><img alt="jQuery Infinite Carousel" src="images/video/infinite-thumb.jpg" /></a></li>
<li><a title="jQuery for Designers: In Live Action" href="index.html%3Fp=123.html"><img alt="jQuery for Designers: In Live Action" src="wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="Return to normal scheduling" href="index.html%3Fp=120.html"><img alt="Return to normal scheduling" src="wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="SlideDown Animation Jump Revisited" href="index.html%3Fp=89.html"><img alt="SlideDown Animation Jump Revisited" src="images/video/animation-jump2-thumb.gif" /></a></li>
<li><a title="BBC Radio 1 Zoom Tabs" href="index.html%3Fp=81.html"><img alt="BBC Radio 1 Zoom Tabs" src="images/video/radio1-thumb.gif" /></a></li>
<li><a title="API: map &#038; grep" href="index.html%3Fp=75.html"><img alt="API: map &#038; grep" src="images/video/mapgrep-thumb.gif" /></a></li>
<li><a title="SXSW, Server Issues and Redesign" href="index.html%3Fp=54.html"><img alt="SXSW, Server Issues and Redesign" src="wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="jQuery look: Tim Van Damme" href="index.html%3Fp=25.html"><img alt="jQuery look: Tim Van Damme" src="images/video/tvd-thumb.jpg" /></a></li>
<li><a title="How to tell if an element exists" href="index.html%3Fp=24.html"><img alt="How to tell if an element exists" src="images/video/element-exists-thumb.jpg" /></a></li>
<li><a title="The Book and The Redesign" href="index.html%3Fp=23.html"><img alt="The Book and The Redesign" src="wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="Ajax Spy" href="index.html%3Fp=22.html"><img alt="Ajax Spy" src="images/video/ajax-spy-thumb.jpg" /></a></li>
<li><a title="Play School: Easy Ajax &#8211; load" href="index.html%3Fp=21.html"><img alt="Play School: Easy Ajax &#8211; load" src="images/video/api-load-thumb.jpg" /></a></li>
<li><a title="API: Filter &#038; Find" href="index.html%3Fp=20.html"><img alt="API: Filter &#038; Find" src="images/video/api-filter-find-thumb.jpg" /></a></li>
<li><a title="Simple jQuery Spy Effect" href="index.html%3Fp=19.html"><img alt="Simple jQuery Spy Effect" src="images/video/simple-spy-thumb.jpg" /></a></li>
<li><a title="Fun with Overflows" href="index.html%3Fp=18.html"><img alt="Fun with Overflows" src="images/video/overflows-thumb.jpg" /></a></li>
<li><a title="Two New Series" href="index.html%3Fp=17.html"><img alt="Two New Series" src="wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="Animation Jump &#8211; quick tip" href="animation-jump-quick-tip.1.html"><img alt="Animation Jump &#8211; quick tip" src="images/video/animation-jump-thumb.gif" /></a></li>
<li><a title="Image Fade Revisited" href="image-fade-revisited.1.html"><img alt="Image Fade Revisited" src="images/video/image-fade-revisited-thumb.gif" /></a></li>
<li><a title="Coda Slider Effect" href="coda-slider-effect.1.html"><img alt="Coda Slider Effect" src="images/video/coda-slider-thumb.gif" /></a></li>
<li><a title="Help make jQuery for Designers better" href="index.html%3Fp=13.html"><img alt="Help make jQuery for Designers better" src="wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="Image Cross Fade Transition" href="index.html%3Fp=12.html"><img alt="Image Cross Fade Transition" src="images/video/image-fade-thumb.gif" /></a></li>
<li><a title="Coda Popup Bubbles" href="coda-popup-bubbles.1.html"><img alt="Coda Popup Bubbles" src="images/video/coda-bubbles-thumb.gif" /></a></li>
<li><a title="Slider Gallery" href="slider-gallery.1.html"><img alt="Slider Gallery" src="images/video/slider-gallery-thumb.gif" /></a></li>
<li><a title="Image Loading" href="index.html%3Fp=9.html"><img alt="Image Loading" src="images/video/image-loading-thumb.gif" /></a></li>
<li><a title="jQuery Tabs" href="index.html%3Fp=8.html"><img alt="jQuery Tabs" src="images/video/tabs-thumb.gif" /></a></li>
<li><a title="Slide out and drawer effect" href="index.html%3Fp=7.html"><img alt="Slide out and drawer effect" src="images/video/slide-draw-thumb.gif" /></a></li>
<li><a title="Using Ajax to Validate Forms" href="index.html%3Fp=6.html"><img alt="Using Ajax to Validate Forms" src="images/video/validate-thumb.gif" /></a></li>
<li><a title="It&#8217;s all about CSS" href="index.html%3Fp=4.html"><img alt="It&#8217;s all about CSS" src="images/video/css-thumb.gif" /></a></li><li class="new"><a title="Simple use of Event Delegation" href="index.html%3Fp=343.html"><img alt="Simple use of Event Delegation" src="images/video/event-delegation-thumb.gif" /><em>New</em></a></li>
<li><a title="Populate Select Boxes" href="index.html%3Fp=328.html"><img alt="Populate Select Boxes" src="images/video/select-boxes-thumb.gif" /></a></li>        </ul>
      </div>
		
		</div>


		<form id="searchForm" action="index.html">

			<fieldset>
		
				<legend>Search</legend>
				
				<label for="search">Search for</label>
				<input type="text" id="search" placeholder="screencasts &amp; tutorials" name="s" value="" /><input class="button" type="submit" value="Find articles" />
				
			</fieldset>
	
		</form>

		</div>
	</div>
	<!-- END titleHolder -->
	
  <!-- content -->
	<div id="content" class="clearFix">
<div class="header">
		<h1><a href="index.html%3Fp=309.html" rel="bookmark">Scroll Linked Navigation</a></h1>

		<p><span>Posted on 18th August 2010 &mdash;</span> There are a few websites I&#8217;ve seen lately that have a left hand navigation automatically updates it&#8217;s selection based on where you&#8217;ve scrolled to on the page. This tutorial will show you exactly how to achieve just that.
</p>
    <ul id="articleNav">
      <li class="prev"><a href="index.html%3Fp=290.html" rel="prev">Earlier: <em>Debugging Tools</em></a></li>
      <li class="next"><a href="index.html%3Fp=328.html" rel="next">Next: <em>Populate Select Boxes</em></a></li>
    </ul>
</div>
<div id="carbonads-container"><div class="carbonad"><div id="azcarbon"></div><script type="text/javascript">var z = document.createElement("script"); z.type = "text/javascript"; z.async = true; z.src = "http://engine.carbonads.com/z/12976/azcarbon_2_1_0_HORIZ"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(z, s);</script></div></div>
		<ul class="articleNav clearFix">
			<li class="tabTutorial"><a class="tutorial selected" href="index.html%3Fp=309.html"><span>Tutorial</span></a></li>
						<li class="tabDemo"><a class="demo" href="http://jqueryfordesigners.com/demo/scroll-link-nav.html"><span>Try Demo</span></a></li>			
			<li class="tabComments"><a class="comments" href="index.html%3Fp=309.html#allcomments"><em>22</em> <span>Comments</span></a></li>
		</ul>
		
        <div id="article" class="clearFix">
		
			<div class="copy">
            
		    <div id="viewport" class="tutorial">
                <div id="tutorial" class="tab">
    				    				  <div id="videoPreview">
      					<ul>
      						<li><a class="quicktime_video" href="media/scroll-link-nav.mp4"><img alt="QuickTime version" src="wp-content/themes/j4d/static/images/video_quicktime.png"/>Play QuickTime version <span class="download">Right click to download</span></a></li>
      						<li><a class="flash_video" href="media/scroll-link-nav.mp4"><img alt="Flash version" src="wp-content/themes/j4d/static/images/video_flash.png"/>Play Flash version <span class="download">Right click to download</span></a></li>
      					</ul>
      					<img src="images/video/scroll-link-nav.jpg" alt="Scroll Linked Navigation" />
      				</div>
    				
    				            
            
                <p><span id="more-309"></span></p>

<h2>Watch</h2>

<p><a href="media/scroll-link-nav.mp4">Watch Scroll Linked Navigation screencast</a> (<a href="video.php%3Ff=scroll-link-nav.mp4.html">Alternative flash version</a>)</p>

<p>QuickTime version is approximately 50Mb, flash version is streaming.</p>

<p><a href="http://jqueryfordesigners.com/demo/scroll-link-nav.html">View the demo used in the screencast</a></p>

<h2>The Problem</h2>

<p>What you need to do is hook in to the user scrolling the web page, and when a particular element comes in to view, if there&#8217;s an associated navigation item &#8211; make it selected. That&#8217;s the trick, the hard part is working out exactly which element is now in view.</p>

<p>Fortuantly there&#8217;s a jQuery plugin for that particular job that makes it really easy to select only those elements that are in the viewport (as well as outside the viewport): <a href="http://www.appelsiini.net/projects/viewport">viewport selectors plugin</a>.</p>

<p>It&#8217;s not a new plugin by any means, but you need to have a specific reason to <em>want</em> to use it &#8211; and it fits this job perfectly.</p>

<h2>Solving using the viewport selector plugin</h2>

<p>Using the <a href="index.html%3Fp=309.html">sample page I&#8217;ve mocked</a> for this example, if you test a jQuery selector using your favourite <a href="index.html%3Fp=290.html">debugging tool</a> we can work out which section of the page the user is looking at. For this example, I&#8217;m going to say the navigation is linked to the topmost <code>h1</code> in view (from within the console):</p>

<pre><code>$('h1:in-viewport').length</code></pre>

<p>This <code>.length</code> test should give me one or more. Using the <code>h1</code> element, I&#8217;ll navigate <em>up</em> the DOM to find the parent element and use it&#8217;s <code>id</code> to update the navigation as appropriate.</p>

<p>Using the <code>id</code> from our container element, we&#8217;ll look for a navigation link that contains a <code>hash</code> that matches the <code>id</code>. This is a common pattern that I&#8217;ve used several times before, and will look something like this where <code>ourID</code> is the <code>id</code> we got using the viewport selector:</p>

<pre><code>$('nav a[hash=#ourID]')</code></pre>

<p>Don&#8217;t worry about that bit just yet, once you see it all working you should get a better idea of how it all fits together.</p>

<p>Before we crack on with the jQuery code required to make this all work, make sure you&#8217;ve included both jQuery then the jQuery viewport selectors plugin:</p>

<pre><code>&lt;script src=&quot;jquery-1.4.2.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;jquery.viewport.js&quot;&gt;&lt;/script&gt;</code></pre>

<p>Now, we&#8217;re ready to rock.</p>

<h2>The Solution</h2>

<p>We need to satisfy the following steps to make this simple effect work:</p>

<ol>
<li>Listen (<code>bind</code>) for when the user scrolls the window</li>
<li>Find the topmost <code>h1</code> element that matches the <code>:in-viewport</code> selector</li>
<li>Use that <code>h1</code> element to find the <code>id</code> from the container, and use that to find the related navigation link</li>
<li>If the navigation link <em>isn&#8217;t</em> already selected, the remove the selected class from all the navigation links, and finally -</li>
<li>Add the selected class to the found navigation link</li>
</ol>

<p>Using this breakdown, let&#8217;s start adding the code in. First listen for when the user scrolls:</p>

<pre><code>$(window).scroll(function () {
  
});</code></pre>

<p>We need to listen on the <code>window</code> because it&#8217;s the <em>whole</em> window the user can scroll. If you wanted to localise this technique to a specific element with overflow, you would use something like <code>$('#foo').scroll(fn)</code>.</p>

<p>Our <code>h1</code>s are inside the <code>#content > section</code> selector, but I want to allow for more than <code>h1</code> in the section, need to find all that are in the viewport, then narrow to the first:</p>

<pre><code>$(window).scroll(function () {
  var inview = $('#content > section > h1:in-viewport:first');
});</code></pre>

<p>Now the <code>inview</code> variable will have a jQuery object. This isn&#8217;t what we want, we want the <code>id</code> and we need it to match the <code>hash</code> attribute on a link. So if the <code>id</code> is &#8216;first&#8217;, the <code>hash</code> should be &#8216;#first&#8217;. So let&#8217;s get the <code>id</code> from the parent section element and get the <code>id</code> attribute and finally prepend a # symbol to create the hash:</p>

<pre><code>$(window).scroll(function () {
  var inview = '#' + $('#content > section > h1:in-viewport:first').parent().attr('id');
});</code></pre>

<div class="tip"><p>Normally I wouldn&#8217;t use the <code>attr('id')</code> method to get the element <code>id</code>, I would do something like <code>.parent()[0].id</code>, but because we&#8217;re using the <code>:in-viewport</code> selector, there&#8217;s a good chance that the selector will fail to match anything if we scroll too far, so using jQuery&#8217;s <code>attr</code> is a safe way of getting some value without our code breaking.</p></div>

<p>Next we&#8217;ll use this hash to find the navigation link:</p>

<pre><code>$(window).scroll(function () {
  var inview = '#' + $('#content > section > h1:in-viewport:first').parent().attr('id'),
      $link = $('nav a').filter('[hash=' + inview + ']');
});</code></pre>

<p>Make sure you try out this newly added line of code in your debugger &#8211; swapping the variable <code>inview</code> for a string like &#8216;#first&#8217;, etc. It&#8217;ll show you which element it&#8217;s selecting.</p>

<p>There&#8217;s two tests we need to make before continuing:</p>

<ol>
<li>Did we actually match anything, <a href="index.html%3Fp=24.html">using <code>length</code></a></li>
<li>Only proceed if the link isn&#8217;t already selected</li>
</ol>

<pre><code>$(window).scroll(function () {
  var inview = '#' + $('#content > section > h1:in-viewport:first').parent().attr('id'),
      $link = $('nav a').filter('[hash=' + inview + ']');
      
  if ($link.length &#038;&#038; !$link.is('.selected')) {
    
  }
});</code></pre>

<p>Finally we remove the selected class from the existing navigation and add it to the correctly found <code>$link</code> navigation:</p>

<pre><code>$(window).scroll(function () {
  var inview = '#' + $('#content > section > h1:in-viewport:first').parent().attr('id'),
      $link = $('nav a').filter('[hash=' + inview + ']');
      
  if ($link.length &#038;&#038; !$link.is('.selected')) {
    $('nav a').removeClass('selected');
    $link.addClass('selected');    
  }
});</code></pre>
                <p class="follow">You should follow me on Twitter <a href="http://twitter.com/rem">here</a> <span class="note">I tweet about jQuery amongst the usual tweet-splurges!</span></p>
                
                