<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta http-equiv="Content-Language" content="en-gb" />
	<meta name="description" content="" />
	<meta name="author" content="" />
	<meta name="keywords" content="" />
	<title>  Coda Popup Bubbles | jQuery for Designers - Tutorials and screencasts</title>
	<link rel="stylesheet" type="text/css" href="wp-content/themes/j4d/static/css/all.min.css" />
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="feed/rss/index.html" />
	<link rel="alternate" type="text/xml" title="RSS .92" href="feed/rss/index.html" />
	<link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="feed/atom/index.html" />

	<link rel="pingback" href="xmlrpc.php" />
		<link rel='archives' title='June 2011' href='2011/06/index.html' />
	<link rel='archives' title='February 2011' href='2011/02/index.html' />
	<link rel='archives' title='August 2010' href='2010/08/index.html' />
	<link rel='archives' title='July 2010' href='2010/07/index.html' />
	<link rel='archives' title='April 2010' href='2010/04/index.html' />
	<link rel='archives' title='March 2010' href='2010/03/index.html' />
	<link rel='archives' title='January 2010' href='2010/01/index.html' />
	<link rel='archives' title='October 2009' href='2009/10/index.html' />
	<link rel='archives' title='September 2009' href='2009/09/index.html' />
	<link rel='archives' title='August 2009' href='2009/08/index.html' />
	<link rel='archives' title='July 2009' href='2009/07/index.html' />
	<link rel='archives' title='June 2009' href='2009/06/index.html' />
	<link rel='archives' title='April 2009' href='2009/04/index.html' />
	<link rel='archives' title='March 2009' href='2009/03/index.html' />
	<link rel='archives' title='February 2009' href='2009/02/index.html' />
	<link rel='archives' title='January 2009' href='2009/01/index.html' />
	<link rel='archives' title='December 2008' href='2008/12/index.html' />
	<link rel='archives' title='October 2008' href='2008/10/index.html' />
	<link rel='archives' title='August 2008' href='2008/08/index.html' />
	<link rel='archives' title='July 2008' href='2008/07/index.html' />
	<link rel='archives' title='June 2008' href='2008/06/index.html' />
	<link rel='archives' title='May 2008' href='2008/05/index.html' />
	<link rel='archives' title='April 2008' href='2008/04/index.html' />
	<link rel='archives' title='March 2008' href='2008/03/index.html' />
	<link rel='archives' title='February 2008' href='2008/02/index.html' />
	<link rel='archives' title='January 2008' href='2008/01/index.html' />
	<link rel='archives' title='December 2007' href='2007/12/index.html' />
<link rel="alternate" type="application/rss+xml" title="jQuery for Designers &raquo; Coda Popup Bubbles Comments Feed" href="coda-popup-bubbles/feed/index.html" />
<link rel='stylesheet' id='msw_wpfm_scan-css'  href='wp-content/plugins/wordpress-file-monitor/wordpress-file-monitor.php%3Fver=scan.html' type='text/css' media='all' />
<script type='text/javascript' src='http://jqueryfordesigners.com/wp-includes/js/jquery/jquery.js?ver=1.7.1'></script>
<script type='text/javascript' src='wp-content/plugins/wp-ajax-edit-comments/js-includes/wp-ajax-edit-comments.js.php%3Fver=1.1.html'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://jqueryfordesigners.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Slider Gallery' href='slider-gallery.1.html' />
<link rel='next' title='Image Cross Fade Transition' href='index.html%3Fp=12.html' />
<meta name="generator" content="WordPress 3.3.1" />
<link rel='canonical' href='coda-popup-bubbles.1.html' />
<link rel='shortlink' href='index.html%3Fp=11.html' />
<link type="text/css" rel="stylesheet" href="wp-content/plugins/wp-ajax-edit-comments/css/editComments.css" />
</head>
<body id="articlePage">


	<!-- BEGIN header -->
	<div id="topstrap">
		<ul>
      <!-- <li class="new"><strong>New!</strong> <a href="http://full-frontal.org">Full Frontal - the JavaScript conference</a></li> -->
			<li class="subscribe">Subscribe to our <a class="feed" href="feed/rss/index.html">Articles</a> <a class="podcast" href="http://phobos.apple.com/WebObjects/MZStore.woa/wa/viewPodcast?id=281057468">Podcast</a></li>
		</ul>
	</div>
	
	<div id="header" class="clearFix">
	
		<div class="minWidth">	
			<h1><a href="index.html"><span>jQuery for Designers</span></a></h1>
			
			<ul id="filter">
				<li>Filter by</li>
				<!-- <li><a href="/">All</a></li> -->
				<li><a href="tag/easy/index.html">Easy</a></li>
				<li><a href="tag/medium/index.html">Medium</a></li>
				<li><a href="tag/hard/index.html">Hard</a></li>
				<li id="searchLink"><a href="coda-popup-bubbles.1.html#searchForm">Search</a></li>
			</ul>
			
		</div>	
	</div>
	<!-- END header -->
	
	<!-- BEGIN titleHolder -->
	<div id="titleHolder" class="clearFix">
		<div class="titleHolderInner">
		<div id="scrollButtons">
			<div class="minWidth clearFix">
	
        <ul class="clearFix" id="articleStrip">
      <li class="selected"><a title="Coda Popup Bubbles" href="coda-popup-bubbles.1.html"><img alt="Coda Popup Bubbles" src="images/video/coda-bubbles-thumb.gif" /></a><em class="selected">Selected</em></li>
<li><a title="Slider Gallery" href="slider-gallery.1.html"><img alt="Slider Gallery" src="images/video/slider-gallery-thumb.gif" /></a></li>
<li><a title="Image Loading" href="index.html%3Fp=9.html"><img alt="Image Loading" src="images/video/image-loading-thumb.gif" /></a></li>
<li><a title="jQuery Tabs" href="index.html%3Fp=8.html"><img alt="jQuery Tabs" src="images/video/tabs-thumb.gif" /></a></li>
<li><a title="Slide out and drawer effect" href="index.html%3Fp=7.html"><img alt="Slide out and drawer effect" src="images/video/slide-draw-thumb.gif" /></a></li>
<li><a title="Using Ajax to Validate Forms" href="index.html%3Fp=6.html"><img alt="Using Ajax to Validate Forms" src="images/video/validate-thumb.gif" /></a></li>
<li><a title="It&#8217;s all about CSS" href="index.html%3Fp=4.html"><img alt="It&#8217;s all about CSS" src="images/video/css-thumb.gif" /></a></li><li class="new"><a title="Simple use of Event Delegation" href="index.html%3Fp=343.html"><img alt="Simple use of Event Delegation" src="images/video/event-delegation-thumb.gif" /><em>New</em></a></li>
<li><a title="Populate Select Boxes" href="index.html%3Fp=328.html"><img alt="Populate Select Boxes" src="images/video/select-boxes-thumb.gif" /></a></li>
<li><a title="Scroll Linked Navigation" href="index.html%3Fp=309.html"><img alt="Scroll Linked Navigation" src="images/video/scroll-link-nav_thumb.gif" /></a></li>
<li><a title="Debugging Tools" href="index.html%3Fp=290.html"><img alt="Debugging Tools" src="images/video/debuggers_thumb.gif" /></a></li>
<li><a title="Enabling the Back Button" href="index.html%3Fp=252.html"><img alt="Enabling the Back Button" src="http://static.jqueryfordesigners.com/images/video/bbq_thumb.gif" /></a></li>
<li><a title="J4D update: My Book, Other Books, Workshops and talks" href="index.html%3Fp=247.html"><img alt="J4D update: My Book, Other Books, Workshops and talks" src="wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="Adding Keyboard Navigation" href="index.html%3Fp=231.html"><img alt="Adding Keyboard Navigation" src="http://static.jqueryfordesigners.com/images/video/keyboard-nav-thumb.jpg" /></a></li>
<li><a title="Fixed Floating Elements" href="index.html%3Fp=214.html"><img alt="Fixed Floating Elements" src="http://static.jqueryfordesigners.com/images/video/fixedfloat-thumb.gif" /></a></li>
<li><a title="Want to learn more about JavaScript? Go Full Frontal!" href="index.html%3Fp=199.html"><img alt="Want to learn more about JavaScript? Go Full Frontal!" src="wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="iPhone-like Sliding Headers" href="index.html%3Fp=190.html"><img alt="iPhone-like Sliding Headers" src="images/video/header-slide-thumb.jpg" /></a></li>
<li><a title="Automatic Infinite Carousel" href="index.html%3Fp=158.html"><img alt="Automatic Infinite Carousel" src="images/video/infinite-auto-thumb.jpg" /></a></li>
<li><a title="Play School: Broken Repeating Animations" href="index.html%3Fp=145.html"><img alt="Play School: Broken Repeating Animations" src="images/video/repeat-effect-thumb.png" /></a></li>
<li><a title="API: queue &#038; dequeue" href="index.html%3Fp=135.html"><img alt="API: queue &#038; dequeue" src="images/video/queue-thumb.gif" /></a></li>
<li><a title="jQuery Infinite Carousel" href="index.html%3Fp=128.html"><img alt="jQuery Infinite Carousel" src="images/video/infinite-thumb.jpg" /></a></li>
<li><a title="jQuery for Designers: In Live Action" href="index.html%3Fp=123.html"><img alt="jQuery for Designers: In Live Action" src="wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="Return to normal scheduling" href="index.html%3Fp=120.html"><img alt="Return to normal scheduling" src="wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="SlideDown Animation Jump Revisited" href="index.html%3Fp=89.html"><img alt="SlideDown Animation Jump Revisited" src="images/video/animation-jump2-thumb.gif" /></a></li>
<li><a title="BBC Radio 1 Zoom Tabs" href="index.html%3Fp=81.html"><img alt="BBC Radio 1 Zoom Tabs" src="images/video/radio1-thumb.gif" /></a></li>
<li><a title="API: map &#038; grep" href="index.html%3Fp=75.html"><img alt="API: map &#038; grep" src="images/video/mapgrep-thumb.gif" /></a></li>
<li><a title="SXSW, Server Issues and Redesign" href="index.html%3Fp=54.html"><img alt="SXSW, Server Issues and Redesign" src="wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="jQuery look: Tim Van Damme" href="index.html%3Fp=25.html"><img alt="jQuery look: Tim Van Damme" src="images/video/tvd-thumb.jpg" /></a></li>
<li><a title="How to tell if an element exists" href="index.html%3Fp=24.html"><img alt="How to tell if an element exists" src="images/video/element-exists-thumb.jpg" /></a></li>
<li><a title="The Book and The Redesign" href="index.html%3Fp=23.html"><img alt="The Book and The Redesign" src="wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="Ajax Spy" href="index.html%3Fp=22.html"><img alt="Ajax Spy" src="images/video/ajax-spy-thumb.jpg" /></a></li>
<li><a title="Play School: Easy Ajax &#8211; load" href="index.html%3Fp=21.html"><img alt="Play School: Easy Ajax &#8211; load" src="images/video/api-load-thumb.jpg" /></a></li>
<li><a title="API: Filter &#038; Find" href="index.html%3Fp=20.html"><img alt="API: Filter &#038; Find" src="images/video/api-filter-find-thumb.jpg" /></a></li>
<li><a title="Simple jQuery Spy Effect" href="index.html%3Fp=19.html"><img alt="Simple jQuery Spy Effect" src="images/video/simple-spy-thumb.jpg" /></a></li>
<li><a title="Fun with Overflows" href="index.html%3Fp=18.html"><img alt="Fun with Overflows" src="images/video/overflows-thumb.jpg" /></a></li>
<li><a title="Two New Series" href="index.html%3Fp=17.html"><img alt="Two New Series" src="wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="Animation Jump &#8211; quick tip" href="animation-jump-quick-tip.1.html"><img alt="Animation Jump &#8211; quick tip" src="images/video/animation-jump-thumb.gif" /></a></li>
<li><a title="Image Fade Revisited" href="image-fade-revisited.1.html"><img alt="Image Fade Revisited" src="images/video/image-fade-revisited-thumb.gif" /></a></li>
<li><a title="Coda Slider Effect" href="coda-slider-effect.1.html"><img alt="Coda Slider Effect" src="images/video/coda-slider-thumb.gif" /></a></li>
<li><a title="Help make jQuery for Designers better" href="index.html%3Fp=13.html"><img alt="Help make jQuery for Designers better" src="wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="Image Cross Fade Transition" href="index.html%3Fp=12.html"><img alt="Image Cross Fade Transition" src="images/video/image-fade-thumb.gif" /></a></li>        </ul>
      </div>
		
		</div>


		<form id="searchForm" action="index.html">

			<fieldset>
		
				<legend>Search</legend>
				
				<label for="search">Search for</label>
				<input type="text" id="search" placeholder="screencasts &amp; tutorials" name="s" value="" /><input class="button" type="submit" value="Find articles" />
				
			</fieldset>
	
		</form>

		</div>
	</div>
	<!-- END titleHolder -->
	
  <!-- content -->
	<div id="content" class="clearFix">
<div class="header">
		<h1><a href="coda-popup-bubbles.1.html" rel="bookmark">Coda Popup Bubbles</a></h1>

		<p><span>Posted on 3rd March 2008 &mdash;</span> <a href="http://panic.com/coda">Coda</a> is one of the new web development tools for the Mac &#8211; and it&#8217;s popular amongst designers and developers I know.  Panic (the developers of Coda) are also known for their sharp design.
</p>
    <ul id="articleNav">
      <li class="prev"><a href="slider-gallery.1.html" rel="prev">Earlier: <em>Slider Gallery</em></a></li>
      <li class="next"><a href="index.html%3Fp=12.html" rel="next">Next: <em>Image Cross Fade Transition</em></a></li>
    </ul>
</div>
<div id="carbonads-container"><div class="carbonad"><div id="azcarbon"></div><script type="text/javascript">var z = document.createElement("script"); z.type = "text/javascript"; z.async = true; z.src = "http://engine.carbonads.com/z/12976/azcarbon_2_1_0_HORIZ"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(z, s);</script></div></div>
		<ul class="articleNav clearFix">
			<li class="tabTutorial"><a class="tutorial selected" href="coda-popup-bubbles.1.html"><span>Tutorial</span></a></li>
						<li class="tabDemo"><a class="demo" href="demo/coda-bubble.html"><span>Try Demo</span></a></li>			<li class="tabCode"><a class="code" href="coda-popup-bubbles.1.html"><span>View Code</span></a></li>
			<li class="tabComments"><a class="comments" href="coda-popup-bubbles.1.html#allcomments"><em>291</em> <span>Comments</span></a></li>
		</ul>
		
        <div id="article" class="clearFix">
		
			<div class="copy">
            
		    <div id="viewport" class="tutorial">
                <div id="tutorial" class="tab">
    				    				  <div id="videoPreview">
      					<ul>
      						<li><a class="quicktime_video" href="media/coda-bubble.mov"><img alt="QuickTime version" src="wp-content/themes/j4d/static/images/video_quicktime.png"/>Play QuickTime version <span class="download">Right click to download</span></a></li>
      						<li><a class="flash_video" href="media/coda-bubble.flv"><img alt="Flash version" src="wp-content/themes/j4d/static/images/video_flash.png"/>Play Flash version <span class="download">Right click to download</span></a></li>
      					</ul>
      					<img src="images/video/coda-bubbles.jpg" alt="Coda Popup Bubbles" />
      				</div>
    				
    				            
            
                <p><span id="more-11"></span>
In particular, Jorge Mesa <a href="request.1.html">writes</a> to ask how to re-create their &#8216;puff&#8217; popup bubble shown when you mouse over the download image.</p>

<p>In essence the effect is just a simple combination of effect, but there&#8217;s a few nuances to be wary of.</p>

<p><img src="images/coda-bubble.jpg" alt="Coda Bubble" /></p>

<h2>How to Solve the Problem</h2>

<p>To create the puff popup bubble effect, we need the following:</p>

<ol>
<li>Markup that assumes that JavaScript is disabled.  It would be fair to say that the popup would be hidden from the CSS.</li>
<li>The hidden popup, correctly styled for when we make it appear.</li>
<li>jQuery to animate the puff effect on <code>mouseover</code> and <code>mouseout</code>.</li>
</ol>

<p>The biggest trick to be wary of is: when you move the mouse over the popup, this triggers a <code>mouseout</code> on the image used to trigger the popup being shown.  I&#8217;ll explain (carefully) how to make sure the effect doesn&#8217;t fail in this situation.</p>

<p>I’ve provided a screencast to walk through how create this functionality. Details on how and what I used can be found below.</p>

<p><a href="media/coda-bubble.mov">Watch the coda bubble screencast</a> (<a href="video.php%3Ff=coda-bubble.flv.html">alternative flash version</a>)</p>

<p>(QuickTime version is approx. 23Mb, flash version is streaming)</p>

<p><a href="demo/coda-bubble.html">View the demo and source code used in the screencast</a></p>

<h2>HTML Markup</h2>

<p>For the purpose of reusability, I&#8217;ve wrapped my &#8216;target&#8217; and &#8216;popup&#8217; in a <code>div</code>.  The target is the element which the user must <code>mouseover</code> to show the popup.</p>

<pre><code>&lt;div class=&quot;bubbleInfo&quot;&gt;
  &lt;img class=&quot;trigger&quot; src=&quot;http://mysite.com/path/to/image.png&quot; /&gt;
  &lt;div class=&quot;popup&quot;&gt;
    &lt;!-- your information content --&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>

<h2>CSS</h2>

<p>There&#8217;s very little to the minimum required CSS.  Of course, how you markup your bubble will change this, and the screencast uses the version from the Coda web site, so there&#8217;s a considerable amount of CSS to style the bubble.</p>

<p>The minimum I recommend for the example is:</p>

<pre><code>.bubbleInfo {
    position: relative;
}

.popup {
    position: absolute;
    display: none; /* keeps the popup hidden if no JS available */
}
</code></pre>

<p>This way we can absolutely position the popup against the trigger.</p>

<h2>jQuery</h2>

<p>To create the effect, we need to run the following animation on the popup element:</p>

<h3>Mouse Over</h3>

<ol>
<li>On <code>mouseover</code>: reset the position of the popup (required because we&#8217;re floating upwards as we puff away).</li>
<li>Animate the popup&#8217;s opacity from 0 to 1 and move it&#8217;s CSS top position by negative 10px (to move upwards).</li>
<li>If the <code>mouseover</code> is fired again, and we&#8217;re still animating &#8211; ignore.</li>
<li>If the <code>mouseover</code> is fired again, and the popup is already visible &#8211; ignore.</li>
</ol>

<h3>Mouse Out</h3>

<ol>
<li>Set a timer to trigger the popup hide function (this prevents accidentally moving out of the &#8216;active&#8217; area).</li>
<li>If a timer is set (to hide), reset the timer (thus only allowing one hide function to fire).</li>
<li>Once timed out, animiate the popup&#8217;s opacity from 1 to 0 and move it&#8217;s CSS top position by negative 10px (to float upwards away).</li>
<li>Set the appropriate flags to indicate the popup is now hidden.</li>
</ol>

<h3>The &#8216;Trick&#8217;</h3>

<p>There was one piece of tricky logic that initially I couldn&#8217;t work out.  Each time I moved the mouse over the popup, it would fire a <code>mouseout</code> on the trigger element &#8211; which would hide the popup.  This is an undesirable bug.</p>

<p>There may be a another way around this, and from what I can tell, the Coda site developers didn&#8217;t solve it this way &#8211; but here&#8217;s the solution:</p>

<p>You need to clear the timer set in the <code>mouseout</code> (point 1 above) in the <code>mouseover</code>.  This completely solves the problem.</p>

<h3>Complete Source Code</h3>

<p>Here&#8217;s the complete source code for the effect, including comments throughout the code to explain what each block is doing.  </p>

<pre><code>$(function () {
  $('.bubbleInfo').each(function () {
    // options
    var distance = 10;
    var time = 250;
    var hideDelay = 500;

    var hideDelayTimer = null;

    // tracker
    var beingShown = false;
    var shown = false;
    
    var trigger = $('.trigger', this);
    var popup = $('.popup', this).css('opacity', 0);

    // set the mouseover and mouseout on both element
    $([trigger.get(0), popup.get(0)]).mouseover(function () {
      // stops the hide event if we move from the trigger to the popup element
      if (hideDelayTimer) clearTimeout(hideDelayTimer);

      // don't trigger the animation again if we're being shown, or already visible
      if (beingShown || shown) {
        return;
      } else {
        beingShown = true;

        // reset position of popup box
        popup.css({
          top: -100,
          left: -33,
          display: 'block' // brings the popup back in to view
        })

        // (we're using chaining on the popup) now animate it's opacity and position
        .animate({
          top: '-=' + distance + 'px',
          opacity: 1
        }, time, 'swing', function() {
          // once the animation is complete, set the tracker variables
          beingShown = false;
          shown = true;
        });
      }
    }).mouseout(function () {
      // reset the timer if we get fired again - avoids double animations
      if (hideDelayTimer) clearTimeout(hideDelayTimer);
      
      // store the timer so that it can be cleared in the mouseover if required
      hideDelayTimer = setTimeout(function () {
        hideDelayTimer = null;
        popup.animate({
          top: '-=' + distance + 'px',
          opacity: 0
        }, time, 'swing', function () {
          // once the animate is complete, set the tracker variables
          shown = false;
          // hide the popup entirely after the effect (opacity alone doesn't do the job)
          popup.css('display', 'none');
        });
      }, hideDelay);
    });
  });
});</code></pre>

<h2>Taking it Further</h2>

<p>This effect could be perfected by changing the initial reset (<code>popup.css()</code>) code to read from the trigger element and approximate it&#8217;s position.  In my example, I&#8217;ve hardcoded it because I only have one on the page &#8211; but you may want to use this effect several times across your page.</p>
                <p class="follow">You should follow me on Twitter <a href="http://twitter.com/rem">here</a> <span class="note">I tweet about jQuery amongst the usual tweet-splurges!</span></p>
                
                