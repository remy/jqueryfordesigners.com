<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta http-equiv="Content-Language" content="en-gb" />
	<meta name="description" content="" />
	<meta name="author" content="" />
	<meta name="keywords" content="" />
	<title>  BBC Radio 1 Zoom Tabs | jQuery for Designers - Tutorials and screencasts</title>
	<link rel="stylesheet" type="text/css" href="../wp-content/themes/j4d/static/css/all.min.css" />
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="../feed/rss/index.html" />
	<link rel="alternate" type="text/xml" title="RSS .92" href="../feed/rss/index.html" />
	<link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="../feed/atom/index.html" />

	<link rel="pingback" href="../xmlrpc.php" />
		<link rel='archives' title='June 2011' href='../2011/06/index.html' />
	<link rel='archives' title='February 2011' href='../2011/02/index.html' />
	<link rel='archives' title='August 2010' href='../2010/08/index.html' />
	<link rel='archives' title='July 2010' href='../2010/07/index.html' />
	<link rel='archives' title='April 2010' href='../2010/04/index.html' />
	<link rel='archives' title='March 2010' href='../2010/03/index.html' />
	<link rel='archives' title='January 2010' href='../2010/01/index.html' />
	<link rel='archives' title='October 2009' href='../2009/10/index.html' />
	<link rel='archives' title='September 2009' href='../2009/09/index.html' />
	<link rel='archives' title='August 2009' href='../2009/08/index.html' />
	<link rel='archives' title='July 2009' href='../2009/07/index.html' />
	<link rel='archives' title='June 2009' href='../2009/06/index.html' />
	<link rel='archives' title='April 2009' href='../2009/04/index.html' />
	<link rel='archives' title='March 2009' href='../2009/03/index.html' />
	<link rel='archives' title='February 2009' href='../2009/02/index.html' />
	<link rel='archives' title='January 2009' href='../2009/01/index.html' />
	<link rel='archives' title='December 2008' href='../2008/12/index.html' />
	<link rel='archives' title='October 2008' href='../2008/10/index.html' />
	<link rel='archives' title='August 2008' href='../2008/08/index.html' />
	<link rel='archives' title='July 2008' href='../2008/07/index.html' />
	<link rel='archives' title='June 2008' href='../2008/06/index.html' />
	<link rel='archives' title='May 2008' href='../2008/05/index.html' />
	<link rel='archives' title='April 2008' href='../2008/04/index.html' />
	<link rel='archives' title='March 2008' href='../2008/03/index.html' />
	<link rel='archives' title='February 2008' href='../2008/02/index.html' />
	<link rel='archives' title='January 2008' href='../2008/01/index.html' />
	<link rel='archives' title='December 2007' href='../2007/12/index.html' />
<link rel="alternate" type="application/rss+xml" title="jQuery for Designers &raquo; BBC Radio 1 Zoom Tabs Comments Feed" href="feed/index.html" />
<link rel='stylesheet' id='msw_wpfm_scan-css'  href='../wp-content/plugins/wordpress-file-monitor/wordpress-file-monitor.php%3Fver=scan.html' type='text/css' media='all' />
<script type='text/javascript' src='http://jqueryfordesigners.com/wp-includes/js/jquery/jquery.js?ver=1.7.1'></script>
<script type='text/javascript' src='../wp-content/plugins/wp-ajax-edit-comments/js-includes/wp-ajax-edit-comments.js.php%3Fver=1.1.html'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://jqueryfordesigners.com/wp-includes/wlwmanifest.xml" />
<link rel='prev' title='API: map &amp; grep' href='../index.html%3Fp=75.html' />
<link rel='next' title='SlideDown Animation Jump Revisited' href='../index.html%3Fp=89.html' />
<meta name="generator" content="WordPress 3.3.1" />
<link rel='canonical' href='../index.html%3Fp=81.html' />
<link rel='shortlink' href='../index.html%3Fp=81.html' />
<link type="text/css" rel="stylesheet" href="../wp-content/plugins/wp-ajax-edit-comments/css/editComments.css" />
</head>
<body id="articlePage">


	<!-- BEGIN header -->
	<div id="topstrap">
		<ul>
      <!-- <li class="new"><strong>New!</strong> <a href="http://full-frontal.org">Full Frontal - the JavaScript conference</a></li> -->
			<li class="subscribe">Subscribe to our <a class="feed" href="../feed/rss/index.html">Articles</a> <a class="podcast" href="http://phobos.apple.com/WebObjects/MZStore.woa/wa/viewPodcast?id=281057468">Podcast</a></li>
		</ul>
	</div>

	<div id="header" class="clearFix">

		<div class="minWidth">
			<h1><a href="../index.html"><span>jQuery for Designers</span></a></h1>

			<ul id="filter">
				<li>Filter by</li>
				<!-- <li><a href="/">All</a></li> -->
				<li><a href="../tag/easy/index.html">Easy</a></li>
				<li><a href="../tag/medium/index.html">Medium</a></li>
				<li><a href="../tag/hard/index.html">Hard</a></li>
				<li id="searchLink"><a href="../index.html%3Fp=81.html#searchForm">Search</a></li>
			</ul>

		</div>
	</div>
	<!-- END header -->

	<!-- BEGIN titleHolder -->
	<div id="titleHolder" class="clearFix">
		<div class="titleHolderInner">
		<div id="scrollButtons">
			<div class="minWidth clearFix">

        <ul class="clearFix" id="articleStrip">
      <li class="selected"><a title="BBC Radio 1 Zoom Tabs" href="../index.html%3Fp=81.html"><img alt="BBC Radio 1 Zoom Tabs" src="../images/video/radio1-thumb.gif" /></a><em class="selected">Selected</em></li>
<li><a title="API: map &#038; grep" href="../index.html%3Fp=75.html"><img alt="API: map &#038; grep" src="../images/video/mapgrep-thumb.gif" /></a></li>
<li><a title="SXSW, Server Issues and Redesign" href="../index.html%3Fp=54.html"><img alt="SXSW, Server Issues and Redesign" src="../wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="jQuery look: Tim Van Damme" href="../index.html%3Fp=25.html"><img alt="jQuery look: Tim Van Damme" src="../images/video/tvd-thumb.jpg" /></a></li>
<li><a title="How to tell if an element exists" href="../index.html%3Fp=24.html"><img alt="How to tell if an element exists" src="../images/video/element-exists-thumb.jpg" /></a></li>
<li><a title="The Book and The Redesign" href="../index.html%3Fp=23.html"><img alt="The Book and The Redesign" src="../wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="Ajax Spy" href="../index.html%3Fp=22.html"><img alt="Ajax Spy" src="../images/video/ajax-spy-thumb.jpg" /></a></li>
<li><a title="Play School: Easy Ajax &#8211; load" href="../index.html%3Fp=21.html"><img alt="Play School: Easy Ajax &#8211; load" src="../images/video/api-load-thumb.jpg" /></a></li>
<li><a title="API: Filter &#038; Find" href="../index.html%3Fp=20.html"><img alt="API: Filter &#038; Find" src="../images/video/api-filter-find-thumb.jpg" /></a></li>
<li><a title="Simple jQuery Spy Effect" href="../index.html%3Fp=19.html"><img alt="Simple jQuery Spy Effect" src="../images/video/simple-spy-thumb.jpg" /></a></li>
<li><a title="Fun with Overflows" href="../index.html%3Fp=18.html"><img alt="Fun with Overflows" src="../images/video/overflows-thumb.jpg" /></a></li>
<li><a title="Two New Series" href="../index.html%3Fp=17.html"><img alt="Two New Series" src="../wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="Animation Jump &#8211; quick tip" href="../animation-jump-quick-tip.1.html"><img alt="Animation Jump &#8211; quick tip" src="../images/video/animation-jump-thumb.gif" /></a></li>
<li><a title="Image Fade Revisited" href="../image-fade-revisited.1.html"><img alt="Image Fade Revisited" src="../images/video/image-fade-revisited-thumb.gif" /></a></li>
<li><a title="Coda Slider Effect" href="../coda-slider-effect.1.html"><img alt="Coda Slider Effect" src="../images/video/coda-slider-thumb.gif" /></a></li>
<li><a title="Help make jQuery for Designers better" href="../index.html%3Fp=13.html"><img alt="Help make jQuery for Designers better" src="../wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="Image Cross Fade Transition" href="../index.html%3Fp=12.html"><img alt="Image Cross Fade Transition" src="../images/video/image-fade-thumb.gif" /></a></li>
<li><a title="Coda Popup Bubbles" href="../coda-popup-bubbles.1.html"><img alt="Coda Popup Bubbles" src="../images/video/coda-bubbles-thumb.gif" /></a></li>
<li><a title="Slider Gallery" href="../slider-gallery.1.html"><img alt="Slider Gallery" src="../images/video/slider-gallery-thumb.gif" /></a></li>
<li><a title="Image Loading" href="../index.html%3Fp=9.html"><img alt="Image Loading" src="../images/video/image-loading-thumb.gif" /></a></li>
<li><a title="jQuery Tabs" href="../index.html%3Fp=8.html"><img alt="jQuery Tabs" src="../images/video/tabs-thumb.gif" /></a></li>
<li><a title="Slide out and drawer effect" href="../index.html%3Fp=7.html"><img alt="Slide out and drawer effect" src="../images/video/slide-draw-thumb.gif" /></a></li>
<li><a title="Using Ajax to Validate Forms" href="../index.html%3Fp=6.html"><img alt="Using Ajax to Validate Forms" src="../images/video/validate-thumb.gif" /></a></li>
<li><a title="It&#8217;s all about CSS" href="../index.html%3Fp=4.html"><img alt="It&#8217;s all about CSS" src="../images/video/css-thumb.gif" /></a></li><li class="new"><a title="Simple use of Event Delegation" href="../index.html%3Fp=343.html"><img alt="Simple use of Event Delegation" src="../images/video/event-delegation-thumb.gif" /><em>New</em></a></li>
<li><a title="Populate Select Boxes" href="../index.html%3Fp=328.html"><img alt="Populate Select Boxes" src="../images/video/select-boxes-thumb.gif" /></a></li>
<li><a title="Scroll Linked Navigation" href="../index.html%3Fp=309.html"><img alt="Scroll Linked Navigation" src="../images/video/scroll-link-nav_thumb.gif" /></a></li>
<li><a title="Debugging Tools" href="../index.html%3Fp=290.html"><img alt="Debugging Tools" src="../images/video/debuggers_thumb.gif" /></a></li>
<li><a title="Enabling the Back Button" href="../index.html%3Fp=252.html"><img alt="Enabling the Back Button" src="http://static.jqueryfordesigners.com/images/video/bbq_thumb.gif" /></a></li>
<li><a title="J4D update: My Book, Other Books, Workshops and talks" href="../index.html%3Fp=247.html"><img alt="J4D update: My Book, Other Books, Workshops and talks" src="../wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="Adding Keyboard Navigation" href="../index.html%3Fp=231.html"><img alt="Adding Keyboard Navigation" src="http://static.jqueryfordesigners.com/images/video/keyboard-nav-thumb.jpg" /></a></li>
<li><a title="Fixed Floating Elements" href="../index.html%3Fp=214.html"><img alt="Fixed Floating Elements" src="http://static.jqueryfordesigners.com/images/video/fixedfloat-thumb.gif" /></a></li>
<li><a title="Want to learn more about JavaScript? Go Full Frontal!" href="../index.html%3Fp=199.html"><img alt="Want to learn more about JavaScript? Go Full Frontal!" src="../wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="iPhone-like Sliding Headers" href="../index.html%3Fp=190.html"><img alt="iPhone-like Sliding Headers" src="../images/video/header-slide-thumb.jpg" /></a></li>
<li><a title="Automatic Infinite Carousel" href="../index.html%3Fp=158.html"><img alt="Automatic Infinite Carousel" src="../images/video/infinite-auto-thumb.jpg" /></a></li>
<li><a title="Play School: Broken Repeating Animations" href="../index.html%3Fp=145.html"><img alt="Play School: Broken Repeating Animations" src="../images/video/repeat-effect-thumb.png" /></a></li>
<li><a title="API: queue &#038; dequeue" href="../index.html%3Fp=135.html"><img alt="API: queue &#038; dequeue" src="../images/video/queue-thumb.gif" /></a></li>
<li><a title="jQuery Infinite Carousel" href="../index.html%3Fp=128.html"><img alt="jQuery Infinite Carousel" src="../images/video/infinite-thumb.jpg" /></a></li>
<li><a title="jQuery for Designers: In Live Action" href="../index.html%3Fp=123.html"><img alt="jQuery for Designers: In Live Action" src="../wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="Return to normal scheduling" href="../index.html%3Fp=120.html"><img alt="Return to normal scheduling" src="../wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="SlideDown Animation Jump Revisited" href="../index.html%3Fp=89.html"><img alt="SlideDown Animation Jump Revisited" src="../images/video/animation-jump2-thumb.gif" /></a></li>        </ul>
      </div>

		</div>


		<form id="searchForm" action="../index.html">

			<fieldset>

				<legend>Search</legend>

				<label for="search">Search for</label>
				<input type="text" id="search" placeholder="screencasts &amp; tutorials" name="s" value="" /><input class="button" type="submit" value="Find articles" />

			</fieldset>

		</form>

		</div>
	</div>
	<!-- END titleHolder -->

  <!-- content -->
	<div id="content" class="clearFix">
<div class="header">
		<h1><a href="../index.html%3Fp=81.html" rel="bookmark">BBC Radio 1 Zoom Tabs</a></h1>

		<p><span>Posted on 3rd April 2009 &mdash;</span> <a href="http://thinkgareth.com/">Gareth Edward</a> asked how to achieve the effect on the latest <a href="http://www.bbc.co.uk/radio1/" title="BBC - Radio 1 - Home">BBC Radio 1 website</a>, where the mouse rolls over the image block, tabs slide up and the image zooms a little to reveal more of the picture.
</p>
    <ul id="articleNav">
      <li class="prev"><a href="../index.html%3Fp=75.html" rel="prev">Earlier: <em>API: map &#038; grep</em></a></li>
      <li class="next"><a href="../index.html%3Fp=89.html" rel="next">Next: <em>SlideDown Animation Jump Revisited</em></a></li>
    </ul>
</div>
<div id="carbonads-container"><div class="carbonad"><div id="azcarbon"></div><script type="text/javascript">var z = document.createElement("script"); z.type = "text/javascript"; z.async = true; z.src = "http://engine.carbonads.com/z/12976/azcarbon_2_1_0_HORIZ"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(z, s);</script></div></div>
		<ul class="articleNav clearFix">
			<li class="tabTutorial"><a class="tutorial selected" href="../index.html%3Fp=81.html"><span>Tutorial</span></a></li>
						<li class="tabDemo"><a class="demo" href="../demo/radio1.html"><span>Try Demo</span></a></li>
			<li class="tabComments"><a class="comments" href="../index.html%3Fp=81.html#allcomments"><em>37</em> <span>Comments</span></a></li>
		</ul>

        <div id="article" class="clearFix">

			<div class="copy">

		    <div id="viewport" class="tutorial">
                <div id="tutorial" class="tab">
    				    				  <div id="videoPreview">
      					<ul>
      						<li><a class="quicktime_video" href="../media/radio1.mov"><img alt="QuickTime version" src="../wp-content/themes/j4d/static/images/video_quicktime.png"/>Play QuickTime version <span class="download">Right click to download</span></a></li>
      						<li><a class="flash_video" href="../media/radio1.flv"><img alt="Flash version" src="../wp-content/themes/j4d/static/images/video_flash.png"/>Play Flash version <span class="download">Right click to download</span></a></li>
      					</ul>
      					<img src="../images/video/radio1.jpg" alt="BBC Radio 1 Zoom Tabs" />
      				</div>



                <p><span id="more-81"></span></p>

<h2>Watch</h2>

<p><a href="../media/radio1.mov" class="movie">Watch BBC Radio 1 Zoom Tabs screencast</a> (<a href="../video.php%3Ff=radio1.flv.html">Alternative flash version</a>)</p>

<p>QuickTime version is approximately 60Mb, flash version is streaming.</p>

<p><a class="source" href="../demo/radio1.html">View the demo used in the screencast</a></p>

<h2>BBC Radio 1 effect</h2>

<p><img src="../images/radio1.jpg" alt="Radio 1 Zoom Area" title="Radio 1 Zoom Area" /></p>

<p>The first thing I noticed about the effect is that it&#8217;s done in Flash.  I&#8217;m a big believer in knowing where Flash has it&#8217;s place: the high end of the effects within browsers (amongst other places).</p>

<p>Equally though, I can how this effect can be achieved using JavaScript and it not taking too much toll on the browser.</p>

<p>There&#8217;s three things that are happening in this effect:</p>

<ol>
<li>When you roll over the image, it zooms out slightly to reveal more of the image. Notice that it also keeps the top position static.</li>
<li>The navigation slides in to view from the bottom of the box, and mousing over the link will trigger showing a different image.</li>
<li>The images automatically change with a swipe effect.</li>
</ol>

<p>I&#8217;m going to set aside the 3rd effect for now (perhaps I&#8217;ll do a screencast on it in the future) and focus on the first two.</p>

<h2>Deconstructing the effects</h2>

<p>The first thing I want to aim for is that the layout works without CSS, and the technique works without JavaScript enabled.</p>

<h3>Roll over zoom</h3>

<p>The only way we can get an image to appear to zoom is by having the actual image element and increasing the height and width.  However, I&#8217;m going to create these image elements on the fly because when my page runs without JavaScript I want the images to appear in the background of the panels.</p>

<p><small>I&#8217;m still in two minds as to whether this <em>should</em> be a background image. The image certainly doesn&#8217;t add any value from a content point of view, so without CSS I think it looks right, but I&#8217;d be open to hear your opinions.</small></p>

<p>When these images are created they need to have their size increased by a defined percentage (which we&#8217;ll make a parameter), so that when we roll over, the image is resized down to it&#8217;s original size, giving the impression of a zoom out.</p>

<p>Given that we are going to stretch these images across the total height and width of the panel, it also means we need to wrap the content that&#8217;s initially in the panel in an element with a higher <code>z-index</code> to make sure the actual content can still be seen and used.</p>

<h3>Navigation slide up</h3>

<p>By default the jQuery <code>slideUp</code> method hides content, and slideDown reveals the content by expanding element downwards.</p>

<p>We need our navigation bar to reveal upwards.  To achieve this we just need to position the navigation absolutely (which also helps our non-JavaScript version of the page), and use the <code>animate</code> method to animate the height from zero to the <em>real</em> height of the navigation item &#8211; which we&#8217;ll capture during initialisation.</p>

<h2>HTML &amp; CSS</h2>

<p>The HTML for the solution is a pretty simple tab system, with the only slight exception that our tab panels are wrapped in a <code>div</code>:</p>

<pre><code>&lt;div class=&quot;zoomoutmenu&quot;&gt;
  &lt;ul class=&quot;tabs&quot;&gt;
    &lt;li&gt;&lt;a href=&quot;#one&quot;&gt;One&lt;/a&gt;&lt;/li&gt;
    &lt;!-- etc --&gt;
  &lt;/ul&gt;
  &lt;div class=&quot;panels&quot;&gt;
    &lt;div id=&quot;one&quot; class=&quot;panel&quot;&gt;
      &lt;h2&gt;Garden life&lt;/h2&gt;
    &lt;/div&gt;
    &lt;!-- etc --&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>

<p>As for the CSS, as an experiment, I&#8217;ve used EMs throughout the CSS &#8211; there&#8217;s no reason why you can&#8217;t use PXs.  I was just interested in seeing the example being zoomed by the browser.  I&#8217;ve set the body font-size to 62.5% so that 1em is equal to 10px.</p>

<p>The only slight deviation away from a traditional tab set up is the navigation is set at the bottom, and because I know with JavaScript we&#8217;re going to use absolutely positioned image elements, the <code>ul.tabs</code> has the following CSS position absolute and a z-index:</p>

<pre><code>.tabs {
  position: absolute;
  bottom: 0;
  z-index: 1;
}</code></pre>

<h2>Aside: Tabs without JavaScript</h2>

<p>If you open look at the solution now, with JavaScript disabled, you&#8217;ll see that because we&#8217;ve wrapped our tab panels in a <code>div</code> with <code>overflow: hidden</code>, we&#8217;ve now created a tabbing system that works entirely without JavaScript.  </p>

<p>If you wanted to use this in production: you need to be wary of ensuring the height of the panels is equal (since it is just overflowing) &#8211; otherwise this is a fairly clean way to tab content without the need for JavaScript</p>

<h2>jQuery</h2>

<p>There&#8217;s four jobs our <em>zoom tabs</em> (for want of a better name) needs to achieve:</p>

<ol>
<li>Convert background images to foreground images and apply styling to give them a default state of zoomed in</li>
<li>Zoom the image inwards using an animation</li>
<li>Slide the navigation up and down out of view</li>
<li>Hovering over the navigation will change the tabs</li>
</ol>

<p>I&#8217;m going to give you each part separately, then you can see the whole thing put together in the <a href="../demo/radio1.html">completed example</a>.</p>

<h3>Converting background images</h3>

<p>As I&#8217;m trying to make a plugin, I&#8217;m saying that I don&#8217;t know <em>anything</em> about the images or height or width of the panels.</p>

<p>We need to loop through each panel, take the background image and create a new image with that url.  Once that new image is loaded, we&#8217;ll pull out the height and width, work out the zoomed in height and width (which will be a percentage larger than the initial size), strip the panel of it&#8217;s background image and then insert the new image in to the panel.  Phew! That&#8217;s sounds like a lot!</p>

<pre><code>$.fn.zoomtabs = function (zoomPercent, easing) {
  if (!zoomPercent) zoomPercent = 10;

  return this.each(function () {
    var $zoomtab = $(this);
    var $tabs = $zoomtab.find('.tabs');

    var panelIds = $tabs.find('a').map(function () {
      return this.hash;
    }).get().join(',');

    var $panels = $(panelIds);
    var images = [];

    $panels.each(function () {
      var $panel = $(this),
        bg = $panel.css('backgroundImage').match(/urls*(["']*(.*?)['"]*)/),
        img = null;

      if (bg !== null &#038;&#038; bg.length &#038;&#038; bg.length > 0) {
        bg = bg[1];
        img = new Image();

        $panel.find('*').wrap('&lt;div style=&quot;position: relative; z-index: 2;&quot; /&gt;');
        $panel.css('backgroundImage', 'none');

        $(img).load(function () {
          var w = this.width / 10;
          var wIn = w / 100 * zoomPercent;
          var h = this.height / 10;
          var hIn = h / 100 * zoomPercent;
          var top = 0;

          var fullView = {
            height: h + 'em',
            width: w + 'em',
            top: top,
            left: 0
          };

          var zoomView = {
            height: (h + hIn) + 'em',
            width: (w + wIn) + 'em',
            top: top,
            left: '-' + (wIn / 2) + 'em'
          };

          $(this).data('fullView', fullView).data('zoomView', zoomView).css(zoomView);

        }).prependTo($panel).css({'position' : 'absolute', 'top' : 0, 'left' : 0 }).attr('src', bg);

        images.push(img);
      }
    });
  });
};</code></pre>

<p>Let&#8217;s take a look at what&#8217;s happening in this code.  </p>

<p>First of all, we&#8217;re dynamically collecting all the panel element ids using the <code>map</code> trick that I showed you in the <a href="../index.html%3Fp=75.html">last J4D episode</a>:</p>

<pre><code>var panelIds = $tabs.find('a').map(function () {
  return this.hash;
}).get().join(',');

var $panels = $(panelIds);
</code></pre>

<p>The <code>panelIds</code> variable contains a string such as: #one,#two,#three &#8211; since this is the hash on the href the tab links, which we immediately capture as a jQuery instance.</p>

<p>Next, we loop through the <code>$panels</code> to convert the background images to foreground images.</p>

<pre><code>bg = $panel.css('backgroundImage').match(/urls*(["']*(.*?)["']*)/),</code></pre>

<p>This is a regular expression that captures the background image.  It&#8217;s written to try to handle different cases in that the url could be plain, wrapped in single quotes or it could be wrapped in double quotes.</p>

<p>We test if we did successfully find the background image (which you may argue we don&#8217;t need since this plugin has a very specific purpose), and if it was found, we&#8217;ll create a new image.</p>

<p>Before we hook in to the image load event, we do two things: 1) remove the background image, and 2) wrap the panels contents in a <code>div</code>:</p>

<pre><code>$panel.find('*').wrap('&lt;div style=&quot;position: relative; z-index: 2;&quot; /&gt;');</code></pre>

<p>This is to ensure the contents appears above the image &#8211; specifically notice the <code>z-index: 2</code>.</p>

<p>The next line is 4 chained commands:</p>

<ol>
<li>Bind a load event to the image</li>
<li>Prepend the image in to the panel &#8211; i.e. make it the first element</li>
<li>Set the position of the image &#8211; which is overwritten as soon as the image is loaded (which I&#8217;ll come on to)</li>
<li>Finally set the url of the image, which will in turn trigger the load event</li>
</ol>

<p>The very last action we perform is to capture the image in the <code>images</code> array.  This will be used later to zoom the images in and out.</p>

<h4>Image load event</h4>

<p>The image load event has 2 purposes:</p>

<ol>
<li>Set the zoomed in position via CSS (actually the last thing to happen)</li>
<li>Store the CSS states of the <em>full view</em> and the <em>zoomed view</em></li>
</ol>

<p>Using a bit of math, we&#8217;re working out what the zoomed state is, and then both variables are stored against the image element using jQuery&#8217;s <a href="http://docs.jquery.com/Core/data#namevalue"><code>data</code></a> function:</p>

<pre><code>$(this).data('fullView', fullView).data('zoomView', zoomView).css(zoomView);</code></pre>

<p>This means we can retrieve this data later on.</p>

<h3>Zoom the image</h3>

<p>I&#8217;ve created a separate function to handle the zooming in and out of the image.  This is because it will be called from two different places with only one single different &#8211; which variable to use to set the CSS &#8211; either &#8216;fullView&#8217; or &#8216;zoomView&#8217; which we set just above.</p>

<pre><code>function zoomImages(zoomType, speed) {
  $(images).each(function () {
    var $image = $(this);
    if ($image.is(':visible')) {
      $image.stop().animate($image.data(zoomType), speed, easing);
    } else {
      $image.css($image.data(zoomType), speed);
    }
  });
}</code></pre>

<p>In this function we loop through the images that we captured in the <code>images</code> array.  From there we say if the image is visible (i.e. it&#8217;s the currently active panel), then animate it&#8217;s CSS properties (either zooming out or in &#8211; this is defined by the zoomType).</p>

<p>If the image isn&#8217;t visible, we need to just change the CSS properties without the animation.  This is because when the user switches to a different tab, the image must be in the same zoomed state as all the other panels.</p>

<h2>Slide the navigation up and down</h2>

<p>Next we need to say, if the user hovers over the whole thing, we want to:</p>

<ol>
<li>Trigger the <code>zoomImages</code> function</li>
<li>Slide the navigation up, or down if they&#8217;re hovering away</li>
</ol>

<pre><code>$zoomtab.hover(function () {
  zoomImages('fullView', speed);
  $tabs.stop().animate({ height : height }, speed, easing);
}, function () {
  zoomImages('zoomView', speed);
  $tabs.stop().animate({ height : 0 }, speed, easing, function () {
    $(this).hide().dequeue();
  });
});</code></pre>

<p>The hover over is fairly simple, we stop the effect from running on the <code>$tabs</code> to prevent it from jumping and down madly, and we animate the height to a pre-captured height (which would happen in the initialisation phase).</p>

<p>Hover off is slightly different.  We do the same, animating down to zero, but then we use a callback function to hide the navigation, this is to ensure it&#8217;s completely hidden once the effect has finished (because in my example, I&#8217;m using a border, and animating the height to zero would leave the border visible).</p>

<h2>Hovering over navigation</h2>

<p>Finally, since I&#8217;m replicating the effect on the BBC (certainly 2/3rds of it), I want to hover over the tabs to trigger the panel to switch.  However, I don&#8217;t want it to trigger straight away, say if I accidently hover over a tab &#8211; so I&#8217;m using a bit of simple <em>hover intent</em> (you could well use the full plugin to achieve this though):</p>

<pre><code>var hoverIntent = null;
$tabs.find('a').hover(function () {
  clearTimeout(hoverIntent);
  var el = this;
  hoverIntent = setTimeout(function () {
    $panels.hide().filter(el.hash).show();
  }, 100);
}, function () {
  clearTimeout(hoverIntent);
}).click(function () {
  return false;
});</code></pre>

<p>I&#8217;ve added a simple 100ms timeout to say if the user is over the tab, <em>now</em> show that panel.  </p>

<p>Since I&#8217;m using <code>setTimeout</code>, I need to capture a copy of the current tab link, because the <code>this</code> keyword inside of the setTimeout is actually a reference to the <code>window</code> object.</p>

<h2>Wrap up</h2>

<p>With all my code now in place (there&#8217;s a few initialisation items I&#8217;ve not covered in this tutorial, but should be covered in the <a href="../media/radio1.mov">screencast</a> the effect is now ready to be used.</p>

<p>Have a play with the <a href="../demo/radio1.html">zoom tabs effect</a>, let me know what you think &#8211; particularly so if you think there&#8217;s a better name for it!</p>
                <p class="follow">You should follow me on Twitter <a href="http://twitter.com/rem">here</a> <span class="note">I tweet about jQuery amongst the usual tweet-splurges!</span></p>

