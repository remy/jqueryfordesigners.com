<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta http-equiv="Content-Language" content="en-gb" />
	<meta name="description" content="" />
	<meta name="author" content="" />
	<meta name="keywords" content="" />
	<title>  jQuery Infinite Carousel | jQuery for Designers - Tutorials and screencasts</title>
	<link rel="stylesheet" type="text/css" href="../wp-content/themes/j4d/static/css/all.min.css" />
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="../feed/rss/index.html" />
	<link rel="alternate" type="text/xml" title="RSS .92" href="../feed/rss/index.html" />
	<link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="../feed/atom/index.html" />

	<link rel="pingback" href="../xmlrpc.php" />
		<link rel='archives' title='June 2011' href='../2011/06/index.html' />
	<link rel='archives' title='February 2011' href='../2011/02/index.html' />
	<link rel='archives' title='August 2010' href='../2010/08/index.html' />
	<link rel='archives' title='July 2010' href='../2010/07/index.html' />
	<link rel='archives' title='April 2010' href='../2010/04/index.html' />
	<link rel='archives' title='March 2010' href='../2010/03/index.html' />
	<link rel='archives' title='January 2010' href='../2010/01/index.html' />
	<link rel='archives' title='October 2009' href='../2009/10/index.html' />
	<link rel='archives' title='September 2009' href='../2009/09/index.html' />
	<link rel='archives' title='August 2009' href='../2009/08/index.html' />
	<link rel='archives' title='July 2009' href='../2009/07/index.html' />
	<link rel='archives' title='June 2009' href='../2009/06/index.html' />
	<link rel='archives' title='April 2009' href='../2009/04/index.html' />
	<link rel='archives' title='March 2009' href='../2009/03/index.html' />
	<link rel='archives' title='February 2009' href='../2009/02/index.html' />
	<link rel='archives' title='January 2009' href='../2009/01/index.html' />
	<link rel='archives' title='December 2008' href='../2008/12/index.html' />
	<link rel='archives' title='October 2008' href='../2008/10/index.html' />
	<link rel='archives' title='August 2008' href='../2008/08/index.html' />
	<link rel='archives' title='July 2008' href='../2008/07/index.html' />
	<link rel='archives' title='June 2008' href='../2008/06/index.html' />
	<link rel='archives' title='May 2008' href='../2008/05/index.html' />
	<link rel='archives' title='April 2008' href='../2008/04/index.html' />
	<link rel='archives' title='March 2008' href='../2008/03/index.html' />
	<link rel='archives' title='February 2008' href='../2008/02/index.html' />
	<link rel='archives' title='January 2008' href='../2008/01/index.html' />
	<link rel='archives' title='December 2007' href='../2007/12/index.html' />
<link rel="alternate" type="application/rss+xml" title="jQuery for Designers &raquo; jQuery Infinite Carousel Comments Feed" href="feed/index.html" />
<link rel='stylesheet' id='msw_wpfm_scan-css'  href='../wp-content/plugins/wordpress-file-monitor/wordpress-file-monitor.php%3Fver=scan.html' type='text/css' media='all' />
<script type='text/javascript' src='http://jqueryfordesigners.com/wp-includes/js/jquery/jquery.js?ver=1.7.1'></script>
<script type='text/javascript' src='../wp-content/plugins/wp-ajax-edit-comments/js-includes/wp-ajax-edit-comments.js.php%3Fver=1.1.html'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://jqueryfordesigners.com/wp-includes/wlwmanifest.xml" />
<link rel='prev' title='jQuery for Designers: In Live Action' href='../index.html%3Fp=123.html' />
<link rel='next' title='API: queue &amp; dequeue' href='../index.html%3Fp=135.html' />
<meta name="generator" content="WordPress 3.3.1" />
<link rel='canonical' href='../index.html%3Fp=128.html' />
<link rel='shortlink' href='../index.html%3Fp=128.html' />
<link type="text/css" rel="stylesheet" href="../wp-content/plugins/wp-ajax-edit-comments/css/editComments.css" />
</head>
<body id="articlePage">


	<!-- BEGIN header -->
	<div id="topstrap">
		<ul>
      <!-- <li class="new"><strong>New!</strong> <a href="http://full-frontal.org">Full Frontal - the JavaScript conference</a></li> -->
			<li class="subscribe">Subscribe to our <a class="feed" href="../feed/rss/index.html">Articles</a> <a class="podcast" href="http://phobos.apple.com/WebObjects/MZStore.woa/wa/viewPodcast?id=281057468">Podcast</a></li>
		</ul>
	</div>

	<div id="header" class="clearFix">

		<div class="minWidth">
			<h1><a href="../index.html"><span>jQuery for Designers</span></a></h1>

			<ul id="filter">
				<li>Filter by</li>
				<!-- <li><a href="/">All</a></li> -->
				<li><a href="../tag/easy/index.html">Easy</a></li>
				<li><a href="../tag/medium/index.html">Medium</a></li>
				<li><a href="../tag/hard/index.html">Hard</a></li>
				<li id="searchLink"><a href="../index.html%3Fp=128.html#searchForm">Search</a></li>
			</ul>

		</div>
	</div>
	<!-- END header -->

	<!-- BEGIN titleHolder -->
	<div id="titleHolder" class="clearFix">
		<div class="titleHolderInner">
		<div id="scrollButtons">
			<div class="minWidth clearFix">

        <ul class="clearFix" id="articleStrip">
      <li class="selected"><a title="jQuery Infinite Carousel" href="../index.html%3Fp=128.html"><img alt="jQuery Infinite Carousel" src="../images/video/infinite-thumb.jpg" /></a><em class="selected">Selected</em></li>
<li><a title="jQuery for Designers: In Live Action" href="../index.html%3Fp=123.html"><img alt="jQuery for Designers: In Live Action" src="../wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="Return to normal scheduling" href="../index.html%3Fp=120.html"><img alt="Return to normal scheduling" src="../wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="SlideDown Animation Jump Revisited" href="../index.html%3Fp=89.html"><img alt="SlideDown Animation Jump Revisited" src="../images/video/animation-jump2-thumb.gif" /></a></li>
<li><a title="BBC Radio 1 Zoom Tabs" href="../index.html%3Fp=81.html"><img alt="BBC Radio 1 Zoom Tabs" src="../images/video/radio1-thumb.gif" /></a></li>
<li><a title="API: map &#038; grep" href="../index.html%3Fp=75.html"><img alt="API: map &#038; grep" src="../images/video/mapgrep-thumb.gif" /></a></li>
<li><a title="SXSW, Server Issues and Redesign" href="../index.html%3Fp=54.html"><img alt="SXSW, Server Issues and Redesign" src="../wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="jQuery look: Tim Van Damme" href="../index.html%3Fp=25.html"><img alt="jQuery look: Tim Van Damme" src="../images/video/tvd-thumb.jpg" /></a></li>
<li><a title="How to tell if an element exists" href="../index.html%3Fp=24.html"><img alt="How to tell if an element exists" src="../images/video/element-exists-thumb.jpg" /></a></li>
<li><a title="The Book and The Redesign" href="../index.html%3Fp=23.html"><img alt="The Book and The Redesign" src="../wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="Ajax Spy" href="../index.html%3Fp=22.html"><img alt="Ajax Spy" src="../images/video/ajax-spy-thumb.jpg" /></a></li>
<li><a title="Play School: Easy Ajax &#8211; load" href="../index.html%3Fp=21.html"><img alt="Play School: Easy Ajax &#8211; load" src="../images/video/api-load-thumb.jpg" /></a></li>
<li><a title="API: Filter &#038; Find" href="../index.html%3Fp=20.html"><img alt="API: Filter &#038; Find" src="../images/video/api-filter-find-thumb.jpg" /></a></li>
<li><a title="Simple jQuery Spy Effect" href="../index.html%3Fp=19.html"><img alt="Simple jQuery Spy Effect" src="../images/video/simple-spy-thumb.jpg" /></a></li>
<li><a title="Fun with Overflows" href="../index.html%3Fp=18.html"><img alt="Fun with Overflows" src="../images/video/overflows-thumb.jpg" /></a></li>
<li><a title="Two New Series" href="../index.html%3Fp=17.html"><img alt="Two New Series" src="../wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="Animation Jump &#8211; quick tip" href="../animation-jump-quick-tip.1.html"><img alt="Animation Jump &#8211; quick tip" src="../images/video/animation-jump-thumb.gif" /></a></li>
<li><a title="Image Fade Revisited" href="../image-fade-revisited.1.html"><img alt="Image Fade Revisited" src="../images/video/image-fade-revisited-thumb.gif" /></a></li>
<li><a title="Coda Slider Effect" href="../coda-slider-effect.1.html"><img alt="Coda Slider Effect" src="../images/video/coda-slider-thumb.gif" /></a></li>
<li><a title="Help make jQuery for Designers better" href="../index.html%3Fp=13.html"><img alt="Help make jQuery for Designers better" src="../wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="Image Cross Fade Transition" href="../index.html%3Fp=12.html"><img alt="Image Cross Fade Transition" src="../images/video/image-fade-thumb.gif" /></a></li>
<li><a title="Coda Popup Bubbles" href="../coda-popup-bubbles.1.html"><img alt="Coda Popup Bubbles" src="../images/video/coda-bubbles-thumb.gif" /></a></li>
<li><a title="Slider Gallery" href="../slider-gallery.1.html"><img alt="Slider Gallery" src="../images/video/slider-gallery-thumb.gif" /></a></li>
<li><a title="Image Loading" href="../index.html%3Fp=9.html"><img alt="Image Loading" src="../images/video/image-loading-thumb.gif" /></a></li>
<li><a title="jQuery Tabs" href="../index.html%3Fp=8.html"><img alt="jQuery Tabs" src="../images/video/tabs-thumb.gif" /></a></li>
<li><a title="Slide out and drawer effect" href="../index.html%3Fp=7.html"><img alt="Slide out and drawer effect" src="../images/video/slide-draw-thumb.gif" /></a></li>
<li><a title="Using Ajax to Validate Forms" href="../index.html%3Fp=6.html"><img alt="Using Ajax to Validate Forms" src="../images/video/validate-thumb.gif" /></a></li>
<li><a title="It&#8217;s all about CSS" href="../index.html%3Fp=4.html"><img alt="It&#8217;s all about CSS" src="../images/video/css-thumb.gif" /></a></li><li class="new"><a title="Simple use of Event Delegation" href="../index.html%3Fp=343.html"><img alt="Simple use of Event Delegation" src="../images/video/event-delegation-thumb.gif" /><em>New</em></a></li>
<li><a title="Populate Select Boxes" href="../index.html%3Fp=328.html"><img alt="Populate Select Boxes" src="../images/video/select-boxes-thumb.gif" /></a></li>
<li><a title="Scroll Linked Navigation" href="../index.html%3Fp=309.html"><img alt="Scroll Linked Navigation" src="../images/video/scroll-link-nav_thumb.gif" /></a></li>
<li><a title="Debugging Tools" href="../index.html%3Fp=290.html"><img alt="Debugging Tools" src="../images/video/debuggers_thumb.gif" /></a></li>
<li><a title="Enabling the Back Button" href="../index.html%3Fp=252.html"><img alt="Enabling the Back Button" src="http://static.jqueryfordesigners.com/images/video/bbq_thumb.gif" /></a></li>
<li><a title="J4D update: My Book, Other Books, Workshops and talks" href="../index.html%3Fp=247.html"><img alt="J4D update: My Book, Other Books, Workshops and talks" src="../wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="Adding Keyboard Navigation" href="../index.html%3Fp=231.html"><img alt="Adding Keyboard Navigation" src="http://static.jqueryfordesigners.com/images/video/keyboard-nav-thumb.jpg" /></a></li>
<li><a title="Fixed Floating Elements" href="../index.html%3Fp=214.html"><img alt="Fixed Floating Elements" src="http://static.jqueryfordesigners.com/images/video/fixedfloat-thumb.gif" /></a></li>
<li><a title="Want to learn more about JavaScript? Go Full Frontal!" href="../index.html%3Fp=199.html"><img alt="Want to learn more about JavaScript? Go Full Frontal!" src="../wp-content/themes/j4d/static/images/titleholder_placeholder.gif" /></a></li>
<li><a title="iPhone-like Sliding Headers" href="../index.html%3Fp=190.html"><img alt="iPhone-like Sliding Headers" src="../images/video/header-slide-thumb.jpg" /></a></li>
<li><a title="Automatic Infinite Carousel" href="../index.html%3Fp=158.html"><img alt="Automatic Infinite Carousel" src="../images/video/infinite-auto-thumb.jpg" /></a></li>
<li><a title="Play School: Broken Repeating Animations" href="../index.html%3Fp=145.html"><img alt="Play School: Broken Repeating Animations" src="../images/video/repeat-effect-thumb.png" /></a></li>
<li><a title="API: queue &#038; dequeue" href="../index.html%3Fp=135.html"><img alt="API: queue &#038; dequeue" src="../images/video/queue-thumb.gif" /></a></li>        </ul>
      </div>

		</div>


		<form id="searchForm" action="../index.html">

			<fieldset>

				<legend>Search</legend>

				<label for="search">Search for</label>
				<input type="text" id="search" placeholder="screencasts &amp; tutorials" name="s" value="" /><input class="button" type="submit" value="Find articles" />

			</fieldset>

		</form>

		</div>
	</div>
	<!-- END titleHolder -->

  <!-- content -->
	<div id="content" class="clearFix">
<div class="header">
		<h1><a href="../index.html%3Fp=128.html" rel="bookmark">jQuery Infinite Carousel</a></h1>

		<p><span>Posted on 11th June 2009 &mdash;</span> With <em>jQuery for Designer</em>&#8216;s redesign I decided to add a scrolling carousel that worked in the same way the carousel worked on the <a href="http://www.apple.com/getamac/ads/">Apple Mac ads page</a>. This tutorial will walk through the fundamentals of the effect and how to recreate it.
</p>
    <ul id="articleNav">
      <li class="prev"><a href="../index.html%3Fp=123.html" rel="prev">Earlier: <em>jQuery for Designers: In Live Action</em></a></li>
      <li class="next"><a href="../index.html%3Fp=135.html" rel="next">Next: <em>API: queue &#038; dequeue</em></a></li>
    </ul>
</div>
<div id="carbonads-container"><div class="carbonad"><div id="azcarbon"></div><script type="text/javascript">var z = document.createElement("script"); z.type = "text/javascript"; z.async = true; z.src = "http://engine.carbonads.com/z/12976/azcarbon_2_1_0_HORIZ"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(z, s);</script></div></div>
		<ul class="articleNav clearFix">
			<li class="tabTutorial"><a class="tutorial selected" href="../index.html%3Fp=128.html"><span>Tutorial</span></a></li>
						<li class="tabDemo"><a class="demo" href="../demo/infinite-carousel.html"><span>Try Demo</span></a></li>
			<li class="tabComments"><a class="comments" href="../index.html%3Fp=128.html#allcomments"><em>97</em> <span>Comments</span></a></li>
		</ul>

        <div id="article" class="clearFix">

			<div class="copy">

		    <div id="viewport" class="tutorial">
                <div id="tutorial" class="tab">
    				    				  <div id="videoPreview">
      					<ul>
      						<li><a class="quicktime_video" href="../media/infinite-carousel.mov"><img alt="QuickTime version" src="../wp-content/themes/j4d/static/images/video_quicktime.png"/>Play QuickTime version <span class="download">Right click to download</span></a></li>
      						<li><a class="flash_video" href="../media/infinite-carousel.flv"><img alt="Flash version" src="../wp-content/themes/j4d/static/images/video_flash.png"/>Play Flash version <span class="download">Right click to download</span></a></li>
      					</ul>
      					<img src="../images/video/infinite.jpg" alt="jQuery Infinite Carousel" />
      				</div>



                <p><span id="more-128"></span></p>

<h2>Watch</h2>

<p><a href="../media/infinite-carousel.mov" class="movie">Watch jQuery Infinite Carousel screencast</a> (<a href="../video.php%3Ff=infinite-carousel.flv.html">Alternative flash version</a>)</p>

<p>QuickTime version is approximately 70Mb, flash version is streaming.</p>

<p><a class="source" href="../demo/infinite-carousel.html">View the demo used in the screencast</a></p>

<p><img src="../images/getamac.jpg" alt="Example of Apple's get a mac carousel" /></p>

<h2>Understanding the Effect</h2>

<p>As with any complicated effect, I always start by looking at the DOM in <a href="http://getfirebug.com">Firebug</a> and interact with the effect, watching for what changes take effect in the DOM.</p>

<p>What I noticed was the (rendered) DOM structure for the list of images was different to the delivered DOM (i.e. the original markup sent).  This means that there&#8217;s some significant initialisation code running.  This isn&#8217;t unexpected for an Apple effect, but there were big clues in to how to create this effect in the difference.</p>

<p>Most importantly the list of images (in a <code>&lt;ul&gt;</code> element) had additional <code>&lt;li&gt;</code> elements at the start of the list <em>and</em> at the end of the list.  There were two types: clone and empty.</p>

<p>The second big clue was the number of cloned elements on the end of the list: it matched the number of visible items in the carousel.</p>

<p>In the diagram below I&#8217;ve tried to outline what&#8217;s cloned in the list, and show what&#8217;s visible. You can see how the list shows 3 items at once, but there&#8217;s 5 items in total.  So the first cloned section (at the start of the list) contains two clones and a single <em>empty</em> clone.  The end of the list has 3 clones &#8211; which represents <em>real</em> items 1-3:</p>

<p><img src="../images/carousel.png" alt="Diagram of DOM to Apple's carousel" /></p>

<h2>The Trick</h2>

<p>Aside from building the DOM with the cloned nodes, the real trick is in the final <em>panel</em> of list items appearing.  Because we&#8217;ve cloned the <em>start</em> of the list to the end of the list, when we scroll off the last items, it looks like we&#8217;ve looped back round.  Once the animation completes, we change the <code>scrollLeft</code> position back to the <em>real</em> first items.  </p>

<p>This <code>scrollLeft</code> isn&#8217;t visible to the user since the overflow is hidden, and so it creates the effect of being infinitely sliding from left or right (since it also works the other way around).</p>

<h2>Markup</h2>

<p>Remembering that we want the effect to work without JavaScript turned on, we&#8217;re going to use a pattern that we use fairly often for effects that scroll: overflows.</p>

<p>The default will be the overflow is visible, and we&#8217;ll use JavaScript to change the element to <code>overflow: hidden</code>.</p>

<pre><code>&lt;div class=&quot;infiniteCarousel&quot;&gt;
  &lt;div class=&quot;wrapper&quot;&gt;
    &lt;ul&gt;
      &lt;li&gt;...&lt;/li&gt;
      &lt;li&gt;...&lt;/li&gt;
      &lt;li&gt;...&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>

<p>The CSS has been marked up in a way that the overflow is visible to start off with, and that the individual <code>&lt;li&gt;</code> elements are the same fixed width.  This is necessary to ensure that we always show complete images in the visible part of the carousel.</p>

<h2>jQuery</h2>

<h3>Replicating the Effect</h3>

<p>This is a reasonably advanced effect so we need to plan carefully what we&#8217;re trying to achieve:</p>

<ol>
<li>Markup that works without JavaScript (done!)</li>
<li>Initialisation &amp; capture the height and width of the first carousel item (required for calculations)</li>
<li>Create empty list items to pad to fill every page</li>
<li>Generate cloned items on the start and end of the list</li>
<li>Adjust the scroll left position to show the <em>real</em> first item</li>
<li>Create goto method that supports forward and backwards</li>
<li>Generate the next/prev links &amp; bind goto calls</li>
</ol>

<p>The <a href="../demo/infinite-carousel.html">completed example</a> is also available if you want to skip through each step.</p>

<h3>Initialisation</h3>

<p>We&#8217;re going to write the code as a plugin so we can release it out to the <em>wild</em> at some later point.  So this follows the typical plugin pattern:</p>

<pre><code>(function ($) {
  $.fn.myPlugin = function () {
    return this.each(function () {
      // plugin code
    };
  };
})(jQuery);</code></pre>

<p>This step is used to initialise the plugin and capture all the variables we need to create this effect.  This includes:</p>

<ol>
<li>jQuery instance of the overflow element</li>
<li>Hiding the overflow</li>
<li>jQuery instance of the list</li>
<li>jQuery instance of the list items</li>
<li>The first item and it&#8217;s width</li>
<li>Number of visible items we can fit in the carousel (rounded up via <code>Math.ceil</code>)</li>
<li>Current page (defaults to 1) and the number of pages (rounded up)</li>
</ol>

<pre><code>var $wrapper = $(&#x27;&gt; div&#x27;, this).css(&#x27;overflow&#x27;, &#x27;hidden&#x27;),
  $slider = $wrapper.find(&#x27;&gt; ul&#x27;),
  $items = $slider.find(&#x27;&gt; li&#x27;),
  $single = $items.filter(&#x27;:first&#x27;),

  // outerWidth: width + padding (doesn't include margin)
  singleWidth = $single.outerWidth(),

  // note: doesn&#x27;t include padding or border
  visible = Math.ceil($wrapper.innerWidth() / singleWidth),
  currentPage = 1,
  pages = Math.ceil($items.length / visible);</code></pre>

<h3>Padding with Empty Items</h3>

<p>During the screencast I said that we&#8217;re making use of the <code>repeat</code> function from another tutorial &#8211; however that was wrong! I must have used it for something else! None the less, here is the repeat function, which we put outside of the plugin since it&#8217;s a utility function:</p>

<pre><code>function repeat(str, n) {
  return new Array( n + 1 ).join( str );
}</code></pre>

<p>The repeat function simple uses and array hack to repeat any string <em>n</em> times.</p>

<p>When we create the empty padding, we need to use modulus to work out how many new empty items we need to fill every page of our carousel with an item:</p>

<pre><code>if (($items.length % visible) != 0) {
  $slider.append(repeat('&lt;li class="empty" /&gt;', visible - ($items.length % visible)));
  $items = $slider.find('> li');
}</code></pre>

<p>Notice that we reinitialise the <code>$items</code> variable.  This is to ensure it contains <em>all</em> of the items, including our newly created empty items.</p>

<h3>Generating Clones</h3>

<p>As per the diagram in the introduction, we need to clone the last page of items to the start of the list, and the first page of items to the end of the list.  These will be the items that we slide on to before we flip the <code>scrollLeft</code> position (as per the <em>trick</em> above).</p>

<pre><code>$items.filter(':first').before($items.slice(-visible).clone().addClass('cloned'));
$items.filter(':last').after($items.slice(0, visible).clone().addClass('cloned'));
$items = $slider.find('> li'); // reselect</code></pre>

<p>We&#8217;re making using the <a href="http://docs.jquery.com/Traversing/slice#startend"><code>slice</code></a> method that jQuery has.  Notice that we first use it with a negative number:</p>

<pre><code>$items.slice(-visible)</code></pre>

<p>This means to take the last <em>n</em> items off the end of $items.  Otherwise we have to pass the start and end point, so the second instance we&#8217;re saying from the start, 0, and the third as the method is zero-based indices.</p>

<h3>Reset Scroll Left</h3>

<p>Since we&#8217;ve created the clones at the start of the list, we need to shift the scroll left back to the real element, otherwise it would look like the carousel is sitting on the last page.</p>

<pre><code>$wrapper.scrollLeft(singleWidth * visible);</code></pre>

<h3>Go To Method</h3>

<p>The <code>gotoPage</code> method will handle going forward and backwards and handle jumping several pages at a time.</p>

<p>We&#8217;re going to use the <code>animate</code> method and only animate the <code>scrollLeft</code> so that it smoothly scrolls.  We could add <a href="http://gsgd.co.uk/sandbox/jquery/easing/">custom easin</a> if we wanted at a later date.</p>

<p>We need to establish the following:</p>

<ol>
<li>Direction we&#8217;re going to slide</li>
<li>Number of pages to slide</li>
<li>The relative scroll left value</li>
</ol>

<p>Once the animation has completed, we also need to maintain the <code>currentPage</code> variable we created on initialisation.</p>

<p>If the page number is greater than the number of pages (i.e. we&#8217;re on our cloned first page), then reset the scroll left to the <em>real</em> first page, and set the page number to 1.</p>

<p>Equally if we have hit the beginning of the list (i.e. we&#8217;re showing the cloned last page), then we reset the scroll left to the <em>real</em> last page, and set the page number to the total number of pages.</p>

<pre><code>function gotoPage(page) {
  var dir = page &lt; currentPage ? -1 : 1,
    n = Math.abs(currentPage - page),
    left = singleWidth * dir * visible * n;

  $wrapper.filter(':not(:animated)').animate({
    scrollLeft : '+=' + left
  }, 500, function () {
    if (page == 0) {
      $wrapper.scrollLeft(singleWidth * visible * pages);
      page = pages;
    } else if (page > pages) {
      $wrapper.scrollLeft(singleWidth * visible);
      page = 1;
    }

    currentPage = page;
  });

  return false;
}</code></pre>

<h3>Navigation buttons</h3>

<p>Finally we need to add the buttons or links to page through the carousel and bind the <code>gotoPage</code> call.</p>

<p>We&#8217;re also going to create a custom goto event that allows us to also jump to any page:</p>

<pre><code>$wrapper.after('&lt;a class=&quot;arrow back&quot;&gt;&amp;lt;&lt;/a&gt;&lt;a class=&quot;arrow forward&quot;&gt;&amp;gt;&lt;/a&gt;');

$('a.back', this).click(function () {
    return gotoPage(currentPage - 1);
});

$('a.forward', this).click(function () {
    return gotoPage(currentPage + 1);
});

// this currently refers to the element the plugin was bound to
$(this).bind('goto', function (event, page) {
    gotoPage(page);
});</code></pre>

<h2>Demo</h2>

<p>That&#8217;s it.  It&#8217;s a fairly complicated plugin as J4D demos go.  There is also the <a href="http://sorgalla.com/jcarousel/">jCarousel</a> plugin that you could use (though I&#8217;m not sure if it has infinite scrolling) &#8211; but obviously the idea here is to show you how it all comes together.</p>

<p>Check out the <a href="../demo/infinite-carousel.html">demo</a>, view the source, have a play!</p>
                <p class="follow">You should follow me on Twitter <a href="http://twitter.com/rem">here</a> <span class="note">I tweet about jQuery amongst the usual tweet-splurges!</span></p>

